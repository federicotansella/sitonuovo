<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>allweeverwantedwaseverything</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .video-container {
      position: relative; /* necessario per posizionare pulsante e caricamento sopra il video */
      display: inline-block;
    }

    video {
      width: 80%; /* dimensione del video */
      height: auto;
      background: black;
      display: block;
    }

    #loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 1.5em;
      font-family: sans-serif;
      pointer-events: none;
      white-space: nowrap; /* mantiene tutto sulla stessa riga */
      text-align: center;
    }

    #fullscreenBtn {
      position: absolute;
      bottom: 10px;  /* distanza dal bordo inferiore del video */
      right: 10px;   /* distanza dal bordo destro del video */
      background: rgba(255,255,255,0.3);
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 1.2em;
      display: none; /* nascosto fino a quando il video parte */
      z-index: 2;    /* sopra il video */
    }

    #fullscreenBtn:hover {
      background: rgba(255,255,255,0.6);
    }
  </style>
</head>
<body>
  <div class="video-container">
    <video id="myVideo" autoplay muted playsinline></video>
    <p id="loading">live stream is loading<span id="dots"></span></p>
    <button id="fullscreenBtn">â›¶</button>
  </div>

  <script>
    // ðŸ”¹ Video 4x6 ore
    const videoUrls = [
      "https://ia601703.us.archive.org/1/items/vincere_hd_night_NEWPOSTERS/vincere_hd_night_NEWPOSTERS.mp4",
      "https://ia802909.us.archive.org/22/items/vincere_hd_day_NEWPOSTERS/vincere_hd_day_NEWPOSTERS.mp4",
      "https://ia800908.us.archive.org/17/items/vincere_hd_sunset/vincere_hd_sunset.mp4",
      "https://ia801703.us.archive.org/1/items/vincere_hd_night_NEWPOSTERS/vincere_hd_night_NEWPOSTERS.mp4"
    ];

    const secondsPerVideo = 6 * 3600;
    const now = new Date();
    const secondsToday = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();

    const videoIndex = Math.floor(secondsToday / secondsPerVideo) % videoUrls.length;
    const startSeconds = secondsToday % secondsPerVideo;

    const video = document.getElementById("myVideo");
    const loading = document.getElementById("loading");
    const fsBtn = document.getElementById("fullscreenBtn");
    const dots = document.getElementById("dots");

    video.src = videoUrls[videoIndex];

    // ðŸ”¹ Animazione dei puntini
    let dotCount = 0;
    setInterval(() => {
      dotCount = (dotCount + 1) % 4;
      dots.textContent = '.'.repeat(dotCount);
    }, 500);

    // ðŸ”¹ Avvio video e sync con orario
    function trySeek() {
      if (video.readyState > 0) {
        if (startSeconds < video.duration) {
          video.currentTime = startSeconds;
        }
        video.play().then(() => {
          loading.style.display = "none"; // nasconde messaggio
          fsBtn.style.display = "block";  // mostra pulsante fullscreen
        }).catch(err => console.log("Autoplay bloccato:", err));
      } else {
        setTimeout(trySeek, 500);
      }
    }

    video.addEventListener("loadedmetadata", trySeek);

    // ðŸ”¹ Pulsante fullscreen
    fsBtn.addEventListener("click", () => {
      if (video.requestFullscreen) {
        video.requestFullscreen();
      } else if (video.webkitRequestFullscreen) {
        video.webkitRequestFullscreen();
      } else if (video.msRequestFullscreen) {
        video.msRequestFullscreen();
      }
    });

    // ðŸ”¹ Nascondere timeline/controlli in fullscreen
    document.addEventListener('fullscreenchange', () => {
      video.controls = false;
    });
  </script>
</body>
</html>
